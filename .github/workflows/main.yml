name: spacenavpro

on:
  - push

jobs:
  build:
    runs-on: ubuntu-20.04
    container:
      image: ros:noetic-perception
    steps:
    - uses: actions/checkout@v2
    - name: Build package
      run: |
        mkdir -p ~/catkin_ws/src
        cd ~/catkin_ws/src
        ln -s $GITHUB_WORKSPACE .
        cd ~/catkin_ws
        apt update && apt install spacenavd libspnav-dev ros-$ROS_DISTRO-roslint && rm -rf /var/lib/apt/lists/*
        bash -c 'source /opt/ros/$ROS_DISTRO/setup.bash; \
        catkin_make'
